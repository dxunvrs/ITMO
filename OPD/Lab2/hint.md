# Команды и этапы их выполнения для 2 лабы
> Для каждой команды будет мнемоника, принцип действия, количество обращений к памяти 

## Про адресацию:  
Если первые(с начала) четыре бита 0, то команда безадресная  
0001... - команда ввода-выводв(не нужно для этой лабы)
1111... - команда ветвления(не нужно для этой лабы)  

В данной лабе рассматриваются команды с абсолютной адресацией(одиннадцатый бит 0)  
Кстати в связи с этим, для номера ячейки остается ровно 11 бит, то есть 2^11=2048 вариантов  

## Безадресные команды
Обращение к памяти всегда 1 и происходит в момент цикла выборки команды  
1. Остановка HLT 0100  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR   
Цикл выполнения: STOP  

2. Очистка аккумулятора CLA 0200  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR   
Цикл выполнения: 0->AC,N,Z,V  

3. Инверсия аккумулятора NOT 0280  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR  
Цикл выполнения: ~AC->AC,N,Z,V    

4. Очистка регистра переноса CLC 0300  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR   
Цикл выполнения: 0->C    

5. Инверсия регистра переноса CMC 0380  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR  
Цикл выполнения: ~C->C  

6. Циклический сдвиг влево ROL 0400 - AC и C сдвигаются по циклу влево (AC_15->C C->AC_0)  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR   
Цикл выполнения: ROL(AC)->AC,N,Z,V,C   

6. Циклический сдвиг вправо ROR 0480 - AC и C сдвигаются по циклу вправо (AC_0->C C->AC_15)  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR   
Цикл выполнения: ROR(AC)->AC,N,Z,V,C  

7. Арифметический сдвиг влево ASL 0500 - AC и C сдвигаются влево (AC_15->C 0->AC_0)  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR  
Цикл выполнения: AC->DR  
                AC+DR->AC,N,Z,V,C  

8. Арифметический сдвиг вправо ASR 0580 - AC и C сдвигаются вправо (AC_0->C AC_15->AC_14)  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR   
Цикл выполнения: ASR(AC)->AC,N,Z,V,C  

9. Расширение знака байта SXTB 0600  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR   
Цикл выполнения: extend sign AC(0..7)->AC,N,Z,V  

10. Обмен старших и младших байтов SWAB 0680  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR   
Цикл выполнения: SWAB(AC)->AC,N,Z,V  

11. Инкремент INC 0700  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR   
Цикл выполнения: AC + 1->AC,N,Z,V,C  

12. Декремент DEC 0740  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR   
Цикл выполнения: AC + ~0->AC,N,Z,V,C  

13. Изменение знака NEG 0780  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR   
Цикл выполнения: ~AC + 1->AC,N,Z,V,C  

## Команды с абсолютной адресацией

1. Логическое умножение AND 2XXX  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR   
Цикл выборки операнда: DR->AR MEM(AR)->DR  
Цикл выполнения: AC & DR->AC,N,Z,V  

2. Логическое или OR 3XXX  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR  
Цикл выборки операнда: DR->AR MEM(AR)->DR  
Цикл выполнения: ~AC & ~DR->BR  
                ~BR->AC,N,Z,V  

3. Сложение ADD 4XXX  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR  
Цикл выборки операнда: DR->AR MEM(AR)->DR  
Цикл выполнения: AC + DR->AC,N,Z,V,C  

4. Сложение с переносом ADC 5XXX  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR  
Цикл выборки операнда: DR->AR MEM(AR)->DR  
Цикл выполнения: AC + DR + 1->AC,N,Z,V,C (если C=0 то БЭВМ вызывает обычный ADD)  

5. Вычитание SUB 6XXX  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR   
Цикл выборки операнда: DR->AR MEM(AR)->DR  
Цикл выполнения: AC + ~DR + 1->AC,N,Z,V,C  

6. Сравнение CMP 7XXX - установить флаги по результату AC-M  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR  
Цикл выборки операнда: DR->AR MEM(AR)->DR  
Цикл выполнения: AC + ~DR + 1->N,Z,V,C  

7. Декремент и пропуск LOOP 8XXX  

> По факту с этой командой и JUMP можно написать цикл с пост-условием(DO-WHILE)
> Например, набор каких-то команд начиная с 1, потом 8111, где 111 - ячейка с счетчиком
> Далее C001 - переход в начало цикла, а если LOOP пропустил, то перехода не будет)  
> Через два JUMP можно сделать обычный while, это будет выглядеть так:

> Счетчик (000)  
> JUMP 010 (ячейка 001)  
> ТЕЛО ЦИКЛА ... (ячейка 002)  
> ...  
> LOOP 000 (ячейка 010)  
> JUMP 002  
> ...  

Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR  
Цикл выборки операнда: DR->AR MEM(AR)->DR  
Цикл выполнения: ~0 + DR->DR  
                ~0 + DR-> BR DR->MEM(AR)  
                if BR(15)=0 - прерывание  
                IP+1->IP  

8. Загрузка LD AXXX  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR  
Цикл выборки операнда: DR->AR MEM(AR)->DR  
Цикл выполнения: DR->AC,N,Z,V  

9. Обмен SWAM BXXX  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR   
Цикл выборки операнда: DR->AR MEM(AR)->DR  
Цикл выполнения: DR->BR  
                AC->DR BR->AC,N,Z,V DR->MEM(AR)  

10. Переход JUMP CXXX  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR  
Цикл выборки операнда: DR->AR MEM(AR)->DR  
Цикл выполнения: DR->IP  

11. Вызов подпрограммы DXXX  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR  
Цикл выборки операнда: DR->AR MEM(AR)->DR  
Цикл выполнения: DR->BR  
                IP->DR  
                BR->IP  
                ~0+SP->SP,AR  
                DR->MEM(AR)   

12. Сохранение ST EXXX  
Цикл выборки команды: IP->BR,AR  
                    BR+1->IP MEM(AR)->DR  
                    DR->CR   
Цикл выполнения: DR->AR  
                AC->DR  
                DR->MEM(AR) 